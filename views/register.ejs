<link rel="stylesheet" href="/stylesheets/register.css" />

<body>
    <div class="register-container">
        <div class="register-form">
            <div class="register-header">
                <h1 class="register-title"><i class=""></i> Register</h1>
                <%= include ("./partials/messages") %>
            </div>
            <form id="registerform" action="/register" method="POST">
                <div class="form-group">
                    <label for="name">Username</label>
                    <input
                        type="name"
                        id="name"
                        name="name"
                        class="form-control"
                        placeholder="Enter Username"
                        maxlength="20"
                        oninput="this.value = this.value.replace(/[^a-zA-Z0-9-_]/g, '')"
                        value="<%= typeof name != 'undefined' ? name : '' %>"
                    />
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        class="form-control"
                        placeholder="Create Password"
                        maxlength="20"
                        minlength="1"
                        value="<%= typeof password != 'undefined' ? password : '' %>"
                    />
                </div>
                <div class="form-group">
                    <label for="password2">Confirm Password</label>
                    <input
                        type="password"
                        id="password2"
                        name="password2"
                        class="form-control"
                        placeholder="Confirm Password"
                        maxlength="20"
                        minlength="1"
                        value="<%= typeof password2 != 'undefined' ? password2 : '' %>"
                    />
                </div>
                <button type="submit" class="register-button">Register</button>
            </form>
            <p class="register-link">Have An Account? <a href="/">Login</a></p>
        </div>
    </div>
</body>
<script>
    // Prevents user from entering special characters in the password field
    passinput = document.getElementById('password');
    passinput2 = document.getElementById('password2');
    Uploadform = document.getElementById('registerform');

    
    passinput.addEventListener('input',function(event) {
        let password = event.target.value;
        if(/[^a-zA-Z0-9-_]/.test(password)) {
            alert("Only letters, numbers, - and _ allowed");
            event.target.value = password.replace(/[^a-zA-Z0-9-_]/g, '');
            return
        }
    });

    passinput2.addEventListener('input', function(event) {
        passinput2.setCustomValidity("");
        let password2 = event.target.value;
        if(/[^a-zA-Z0-9-_]/.test(password2)) {
            alert("Only letters, numbers, - and _ allowed");
            event.target.value = password2.replace(/[^a-zA-Z0-9-_]/g, '');
            return
        }
    });
</script>
